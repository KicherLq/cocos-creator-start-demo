{"version":3,"sources":["file:///C:/Users/ctwl/Downloads/cocos-nodejs-io-game-start-demo-master/apps/client/assets/Scripts/Global/NetWorkManager.ts"],"names":["NetWorkManager","Singleton","PORT","__ws","Instance","GetInstance","connect","Promise","resolve","reject","WebSocket","onopen","onclose","onerror","error","console","onmessage","message","log","data","sendMessage","send"],"mappings":";;;0FAGaA,c;;;;;;;;;;;;;;;;AAFNC,MAAAA,S;;;;;;;;;gCAEMD,c,GAAN,MAAMA,cAAN;AAAA;AAAA,kCAAuC;AAAA;AAAA;AAAA,eAKlCE,IALkC,GAK3B,IAL2B;AAAA,eAMlCC,IANkC,GAMhB,IANgB;AAAA;;AACvB,mBAARC,QAAQ,GAAG;AAClB,iBAAO,MAAMC,WAAN,EAAP;AACH;;AAKDC,QAAAA,OAAO,GAAG;AACN,iBAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC,iBAAKN,IAAL,GAAY,IAAIO,SAAJ,CAAe,kBAAiB,KAAKR,IAAK,EAA1C,CAAZ;;AACA,iBAAKC,IAAL,CAAUQ,MAAV,GAAmB,MAAM;AACrBH,cAAAA,OAAO,CAAC,IAAD,CAAP;AACH,aAFD;;AAGA,iBAAKL,IAAL,CAAUS,OAAV,GAAoB,MAAM;AACtBH,cAAAA,MAAM,CAAC,KAAD,CAAN;AACH,aAFD;;AAGA,iBAAKN,IAAL,CAAUU,OAAV,GAAqBC,KAAD,IAAW;AAC3BC,cAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACAL,cAAAA,MAAM,CAAC,KAAD,CAAN;AACH,aAHD;;AAIA,iBAAKN,IAAL,CAAUa,SAAV,GAAuBC,OAAD,IAA2B;AAC7CF,cAAAA,OAAO,CAACG,GAAR,CAAYD,OAAO,CAACE,IAApB;AACH,aAFD;AAGH,WAfM,CAAP;AAgBH;;AAEDC,QAAAA,WAAW,CAACD,IAAD,EAAe;AACtB,eAAKhB,IAAL,CAAUkB,IAAV,CAAeF,IAAf;AACH;;AA7ByC,O","sourcesContent":["import { _decorator } from \"cc\";\r\nimport Singleton from \"../Base/Singleton\";\r\n\r\nexport class NetWorkManager extends Singleton {\r\n    static get Instance() {\r\n        return super.GetInstance<NetWorkManager>();\r\n    }\r\n\r\n    private PORT = 8080;\r\n    private __ws: WebSocket = null;\r\n\r\n    connect() {\r\n        return new Promise((resolve, reject) => {\r\n            this.__ws = new WebSocket(`ws://localhost:${this.PORT}`);\r\n            this.__ws.onopen = () => {\r\n                resolve(true);\r\n            };\r\n            this.__ws.onclose = () => {\r\n                reject(false);\r\n            };\r\n            this.__ws.onerror = (error) => {\r\n                console.error(error);\r\n                reject(false);\r\n            };\r\n            this.__ws.onmessage = (message: MessageEvent) => {\r\n                console.log(message.data);\r\n            };\r\n        });\r\n    }\r\n\r\n    sendMessage(data: string) {\r\n        this.__ws.send(data);\r\n    }\r\n}\r\n"]}