{"version":3,"sources":["file:///C:/Users/ctwl/Downloads/cocos-nodejs-io-game-start-demo-master/apps/client/assets/Scripts/Global/DataManager.ts"],"names":["DataManager","Singleton","EntityTypeEnum","ACTOR_SPEED","jm","actorMap","Map","prefabMap","textureMap","state","actors","id","type","Actor1","weaponType","Weapon1","position","x","y","direction","Instance","GetInstance","applyInput","input","deltaTime","actor","find","e"],"mappings":";;;0GAUqBA,W;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AATdC,MAAAA,S;;AAIEC,MAAAA,c,iBAAAA,c;;;;;;;;;;;AAGHC,MAAAA,W,GAAc,G;;yBAECH,W,GAAN,MAAMA,WAAN;AAAA;AAAA,kCAAoC;AAAA;AAAA;AAAA,eAK/CI,EAL+C;AAAA,eAM/CC,QAN+C,GAMT,IAAIC,GAAJ,EANS;AAAA,eAO/CC,SAP+C,GAOd,IAAID,GAAJ,EAPc;AAAA,eAQ/CE,UAR+C,GAQN,IAAIF,GAAJ,EARM;AAAA,eAU/CG,KAV+C,GAU/B;AACZC,YAAAA,MAAM,EAAC,CACH;AACIC,cAAAA,EAAE,EAAE,CADR;AAEIC,cAAAA,IAAI,EAAE;AAAA;AAAA,oDAAeC,MAFzB;AAGIC,cAAAA,UAAU,EAAE;AAAA;AAAA,oDAAeC,OAH/B;AAIIC,cAAAA,QAAQ,EAAE;AACNC,gBAAAA,CAAC,EAAE,CADG;AAENC,gBAAAA,CAAC,EAAE;AAFG,eAJd;AAQIC,cAAAA,SAAS,EAAE;AACPF,gBAAAA,CAAC,EAAE,CADI;AAEPC,gBAAAA,CAAC,EAAE;AAFI;AARf,aADG;AADK,WAV+B;AAAA;;AAC/B,mBAARE,QAAQ,GAAG;AACrB,iBAAO,MAAMC,WAAN,EAAP;AACA;;AAyBEC,QAAAA,UAAU,CAACC,KAAD,EAAoB;AAC1B,cAAM;AAACC,YAAAA,SAAD;AAAYL,YAAAA,SAAZ;AAAuBP,YAAAA,IAAvB;AAA6BD,YAAAA;AAA7B,cAAmCY,KAAzC;AACA,cAAME,KAAK,GAAG,KAAKhB,KAAL,CAAWC,MAAX,CAAkBgB,IAAlB,CAAuBC,CAAC,IAAIA,CAAC,CAAChB,EAAF,KAASA,EAArC,CAAd;AACAc,UAAAA,KAAK,CAACN,SAAN,GAAkBA,SAAlB;AAEAM,UAAAA,KAAK,CAACT,QAAN,CAAeC,CAAf,IAAoBE,SAAS,CAACF,CAAV,GAAcO,SAAd,GAA0BrB,WAA9C;AACAsB,UAAAA,KAAK,CAACT,QAAN,CAAeE,CAAf,IAAoBC,SAAS,CAACD,CAAV,GAAcM,SAAd,GAA0BrB,WAA9C;AACH;;AAnC8C,O","sourcesContent":["import { Prefab } from \"cc\";\nimport Singleton from \"../Base/Singleton\";\nimport { IActorMove, IState } from \"../Common/State\";\nimport { ActorManager } from \"../Entity/Actor/ActorManager\";\nimport { JoyStickManager } from \"../UI/JoyStickManager\";\nimport { EntityTypeEnum } from \"../Common/Enum\";\nimport { SpriteFrame } from \"cc\";\n\nconst ACTOR_SPEED = 100;\n\nexport default class DataManager extends Singleton {\n\tstatic get Instance() {\n\t\treturn super.GetInstance<DataManager>();\n\t}\n\n    jm: JoyStickManager;\n    actorMap: Map<number, ActorManager> = new Map();\n    prefabMap: Map<string, Prefab> = new Map();\n    textureMap: Map<string, SpriteFrame[]> = new Map();\n\n    state: IState = {\n        actors:[\n            { \n                id: 1, \n                type: EntityTypeEnum.Actor1,\n                weaponType: EntityTypeEnum.Weapon1,\n                position: {\n                    x: 0, \n                    y: 0\n                }, \n                direction: {\n                    x: 1, \n                    y: 0\n                },\n            },\n        ],\n    }\n\n    applyInput(input: IActorMove) {\n        const {deltaTime, direction, type, id} = input;\n        const actor = this.state.actors.find(e => e.id === id);\n        actor.direction = direction;\n        \n        actor.position.x += direction.x * deltaTime * ACTOR_SPEED;\n        actor.position.y += direction.y * deltaTime * ACTOR_SPEED;\n    }\n}\n"]}